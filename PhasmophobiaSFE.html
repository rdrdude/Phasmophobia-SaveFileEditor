<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Phasmophobia - SaveFileEditor</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap"></head><body><div class="container"><section class="card"><h2>Decryption</h2><input type="file" id="decryptFileInput"><button onclick="decryptFile()">Decrypt & Download</button></section><section class="card"><h2>Encryption</h2><input type="file" id="encryptFileInput"><button onclick="encryptFile()">Encrypt & Download</button></section><div id="toast" class="toast"></div></div><div id="loadingOverlay"><div id="loadingSpinner"></div></div><style>body {font-family: 'Roboto', sans-serif;color: #FF4C4C;background-color: #f5f5f5;margin: 0;display: flex;align-items: center;justify-content: center;height: 100vh;touch-action: none;overflow: hidden;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.container {display: flex;flex-direction: column;align-items: center;width: auto;margin: 20px;}.card {color: #FF4C4C;background-color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px rgba(255, 76, 76, 0.3);margin-bottom: 20px;max-width: 460px;width: auto;box-sizing: border-box;}h2 {border-bottom: 2px solid #FF4C4C;padding-bottom: 10px;margin-bottom: 20px;color: #FF4C4C;}input[type="file"] {padding: 10px;margin-bottom: 10px;width: 100%;box-sizing: border-box;border: 1px solid #ccc;border-radius: 50px;color: #555;}button {background-color: #FF4C4C;color: #fff;padding: 10px;margin-bottom: 10px;width: 100%;border: none;cursor: pointer;border-radius: 50px;}button:hover {background-color: #E54444;}button:active {background-color: #CC3D3D;color: #000;}.toast {position: fixed;bottom: 20px;right: 20px;background-color: #FF4C4C;color: #fff;padding: 10px 20px;border-radius: 50px;box-shadow: 0 0 10px rgba(255, 76, 76, 0.3);opacity: 0;transition: opacity 0.3s;pointer-events: none;z-index: 1000;}#loadingOverlay {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background-color: rgba(245, 245, 245, 1);display: flex;align-items: center;justify-content: center;z-index: 1000;}#loadingSpinner {border: 8px solid #fff;border-top: 8px solid #FF4C4C;border-radius: 50%;width: 50px;height: 50px;animation: spin 1s linear infinite;}@keyframes spin {0% {transform: rotate(0deg);}100% {transform: rotate(360deg);}}@media (prefers-color-scheme: dark) {body {background-color: #333;color: #fff;}.card {background-color: #444;box-shadow: 0 0 10px rgba(190, 40, 40, 0.5);}h2 {border-bottom: 2px solid #BE2828;color: #BE2828;}input[type="file"] {border: 1px solid #666;color: #ccc;}button {background-color: #BE2828;color: #fff;}button:hover {background-color: #A82525;}button:active {background-color: #891E1E;color: #000;}.toast {background-color: #BE2828;color: #fff;box-shadow: 0 0 10px rgba(190, 40, 40, 0.5);}#loadingOverlay {background-color: #333;}#loadingSpinner {border: 8px solid #444;border-top: 8px solid #BE2828;}}</style><script>document.addEventListener("DOMContentLoaded", function () {const loadingOverlay = document.getElementById("loadingOverlay");loadingOverlay.style.display = "flex";setTimeout(() => {loadingOverlay.style.display = "none";}, 5000);});let toastQueue = [];let isToastShowing = false;function showToast(message) {toastQueue.push(message);displayNextToast();}function displayNextToast() {if (isToastShowing || toastQueue.length === 0) return;const toast = document.getElementById('toast');toast.textContent = toastQueue.shift();toast.style.opacity = '1';isToastShowing = true;setTimeout(() => {toast.style.opacity = '0';isToastShowing = false;if (toastQueue.length > 0) {setTimeout(displayNextToast, 300);}}, 3000);}async function deriveKey(password, salt, usage) {const baseKey = await window.crypto.subtle.importKey("raw", new TextEncoder().encode(password), { name: "PBKDF2" }, false, ["deriveKey"]);return window.crypto.subtle.deriveKey({ name: "PBKDF2", salt: salt, iterations: 100, hash: "SHA-1" },baseKey,{ name: "AES-CBC", length: 128 },true,usage);}async function decryptFile() {try {const fileInput = document.getElementById('decryptFileInput');const password = atob('dDM2Z3JlZjl1ODR5N2Y0M2c=');if (!password) {showToast('Please enter a decryption password.');return;}const file = fileInput.files[0];if (!file) {showToast('Please select a file to decrypt.');return;}const fileExists = await checkFileExists(file);if (!fileExists) {showToast('The selected file does not exist. It may have been deleted or moved.');return;}const arrayBuffer = await file.arrayBuffer();if (arrayBuffer.byteLength < 16) {showToast('Invalid file format. The file may not be encrypted.');return;}const MAX_FILE_SIZE_MB = 1;const MAX_FILE_SIZE_BYTES = MAX_FILE_SIZE_MB * 1048576;if (file.size > MAX_FILE_SIZE_BYTES) {showToast(`File size exceeds the maximum allowed limit of ${MAX_FILE_SIZE_MB} MB.`);return;}const iv = new Uint8Array(arrayBuffer.slice(0, 16));const data = new Uint8Array(arrayBuffer.slice(16));try {const key = await deriveKey(password, iv, ["decrypt"]);const decryptedData = await window.crypto.subtle.decrypt({ name: "AES-CBC", iv: iv }, key, data);const blob = new Blob([decryptedData], { type: "application/octet-stream" });const url = URL.createObjectURL(blob);const a = document.createElement("a");a.href = url;a.download = "SaveFileDECRYPTED.txt";a.click();URL.revokeObjectURL(url);} catch (error) {showToast('Failed to decrypt the file.');}} catch (error) {console.error("Error during decryption:", error);}}async function encryptFile() {try {const fileInput = document.getElementById('encryptFileInput');const password = atob('dDM2Z3JlZjl1ODR5N2Y0M2c=');if (!password) {showToast('Please enter an encryption password.');return;}const file = fileInput.files[0];if (!file) {showToast('Please select a file to encrypt.');return;}const fileExists = await checkFileExists(file);if (!fileExists) {showToast('The selected file does not exist. It may have been deleted or moved.');return;}const MAX_FILE_SIZE_MB = 1;const MAX_FILE_SIZE_BYTES = MAX_FILE_SIZE_MB * 1048576;if (file.size > MAX_FILE_SIZE_BYTES) {showToast(`File size exceeds the maximum allowed limit of ${MAX_FILE_SIZE_MB} MB.`);return;}const arrayBuffer = await file.arrayBuffer();const iv = window.crypto.getRandomValues(new Uint8Array(16));const key = await deriveKey(password, iv, ["encrypt"]);const encryptedData = await window.crypto.subtle.encrypt({ name: "AES-CBC", iv: iv }, key, arrayBuffer);const blob = new Blob([iv, new Uint8Array(encryptedData)], { type: "application/octet-stream" });const url = URL.createObjectURL(blob);const a = document.createElement("a");a.href = url;a.download = "SaveFileENCRYPTED.txt";a.click();URL.revokeObjectURL(url);} catch (error) {console.error("Error during encryption:", error);}}async function checkFileExists(file) {return new Promise((resolve) => {const reader = new FileReader();reader.onload = () => resolve(true);reader.onerror = () => resolve(false);reader.readAsArrayBuffer(file);});}</script></body></html>